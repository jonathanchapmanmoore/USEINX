(function(){(function(n,t,i){var o,b,k,d,g,l,v,nt,a,tt,it,rt,ut,y,ft,et,ot,s,c,st,f,h,r,u,p=[].slice,e=function(n,t){function r(){this.constructor=n}for(var i in t)ht.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},ht={}.hasOwnProperty,w=function(n,t){return function(){return n.apply(t,arguments)}};f=n.console;typeof f=="undefined"&&(h=function(){},f={log:h,warn:h,assert:h,clear:h,dir:h,error:h,info:h,profile:h,profileEnd:h});r={achievementsEarned:"Achievements Earned",avatar:"Avatar of ${DisplayName}",header:{},recentAchievements:"Recent Achievements",recognitionPoints:"Points",learnHow:"No Achievements Earned. <a>Learn How!<\/a>",learnHowLink:function(){var n;return n='<a href="http://${$item.settings.brand}.microsoft.com/ff395928.aspx#How_do_I_earn_achievements" class="profile-usercard-profileLink" target="_blank">',r.learnHow.replace("<a>",n)},leaderboardEmpty:"No leaderboard results available at this time.",viewProfile:"View Profile",boostProfile:"Boost your online profile",joined:"Joined ",notableAchievements:"Notable Achievements",recentActivity:"Recent Activity: ",topPercentile:"Top",uploadImage:"Upload an image",userPoint:"Point",userPoints:"Points",goToProfile:"Go to ${DisplayName}'s profile",showActivity:"Show Activity"};r.header["all time"]="all time";r.header.day="last day";r.header.days="last %d days";r.header.hour="last hour";r.header.hours="last %d hours";r.header.week="last week";r.header.weeks="last %d weeks";r.header["activities completed"]="activities completed";r.header["points earned"]="points earned";r.achievementsEarned="Achievements Earned";r.avatar="Avatar of ${DisplayName}";r.learnHow="No Achievements Earned. <a>Learn How!<\/a>";r.recentAchievements="Recent Achievements";r.recognitionPoints="Points";r.viewProfile="View Profile";r.leaderboardEmpty="No leaderboard results available at this time.";r.header["all time"]="all time";r.header.day="last day";r.header.days="last %d days";r.header.hour="last hour";r.header.hours="last %d hours";r.header.week="last week";r.header.weeks="last %d weeks";r.header["activities completed"]="activities completed";r.header["points earned"]="points earned";r.boostProfile="Boost your online profile";r.joined="Joined ";r.notableAchievements="Notable Achievements";r.recentActivity="Recent Activity: ";r.topPercentile="Top";r.uploadImage="Upload an image";r.userPoint="Point";r.userPoints="Points";r.goToProfile="Go to ${DisplayName}'s profile";r.showActivity="Show activity";u={animationSpeed:100,brand:"msdn",host:n.location.host,lang:"en",largeImageDimension:135,leaderboardDataUri:"/v1/leaderboard/",scanDelay:250,search:"",statGroupDataUri:"/v1/statGroup/",userDataUri:"/v1/user/usercard/",userDataBatchSize:50,widgetImageUri:"/v1/resources/widget.png",hideDelay:250,showDelay:750,version:"debug",protocol:n.location.protocol};u.brand="Technet";u.lang="en-US";u.host="widgets.services.microsoft.com:443";u.search="?brand=Technet&lang=en-US&ver=4.9.0.0";u.version="4.9.0.0";u.protocol="https:";o={LogMetric:function(){return!0},getBaseMetricObject:function(){return{currentUrl:t.URL,referrer:t.referrer}}};s={resolve:function(n){return u.protocol+"//"+u.host+n},resolveStatic:function(n){return this.resolve(n)+u.search},createDataUri:function(){var n,t;return n=arguments[0],t=2<=arguments.length?p.call(arguments,1):[],n=""+s.resolve(n)+(t!=null?t.sort().join(","):void 0),n+("?lang="+u.lang+"&brand="+u.brand)},createQSDataUri:function(){var n,t;return n=arguments[0],t=2<=arguments.length?p.call(arguments,1):[],n=s.resolve(n)+"?id="+(t!=null?t.sort().join(","):void 0),n+("&lang="+u.lang+"&brand="+u.brand)},createStatGroupDataUri:function(n,t,i){var r;return r=s.createDataUri(u.statGroupDataUri,n),r+("&filterLocale="+t+"&filterUserId="+i)},createUsercardDataUri:function(){return function(){var n;return n=1<=arguments.length?p.call(arguments,0):[],s.createQSDataUri(u.userDataUri,n)}}(this),createLeaderboardDataUri:function(){return function(){var n;return n=1<=arguments.length?p.call(arguments,0):[],s.createDataUri(u.leaderboardDataUri,n)}}(this),createWidgetImageUri:function(){return s.resolve(u.widgetImageUri+"?v="+u.version)}};a={scaleImage:function(n,t){var r,u,f;return r=i(n),u={x:r.width(),y:r.height()},f=this.getXDimension(u,t),r.css("width",f),r.css("display","inline-block")},getXDimension:function(n,t){var i,r;return n.x<=t&&n.y<=t?n.x:(r=n.x>=n.y?n.x:n.y,i=t/r,Math.floor(n.x*i))}};ot={ellipsify:function(n,t){return n.length<=t?n:(f.log("ellipsify"),n.substr(0,t-3).concat("..."))}};v=function(){function n(n,t,i,r,u){this.dataIdName=n;this.inline=t;this.selector=i;this.template=r;this.templateName=u;this.warn}return n.prototype.canonicalizeId=function(n){return n.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()},n.prototype.findIds=function(n){var f,t,r,u,e,s,o;for(t=[],o=i(this.selector,n),r=0,s=o.length;r<s;r++)e=o[r],f=i(e).attr(this.dataIdName),f?(u=this.canonicalizeId(f),i(e).attr(this.dataIdName,u),i.inArray(u,t)===-1&&t.push(u)):this.warn('Missing required attribute "'+this.dataIdName+'"');return t},n.prototype.onDataLoaded=function(){return this.abstractWarn()},n.prototype.showAll=function(){return this.abstractWarn()},n.prototype.showWidget=function(){return this.abstractWarn()},n.prototype.abstractWarn=function(){return this.warn("You must implement this abstract class method.")},n.prototype.warn=function(n){return f.warn("Profile [BaseWidgetRegistration]: "+n)},n}();c=function(n){function t(n,t,r,u,f){this.dataIdName=n;this.inline=t;this.selector=r;this.template=u;this.templateName=f;this.foundIds=[];i.template(this.templateName,this.template)}return e(t,n),t.prototype.onDataLoaded=function(n){var t;return t=this,i(this.selector+"[data-profile-usercard-customLink]").each(function(){var r,u;return r=i(this).attr("data-profile-usercard-customLink"),u=i(this).attr("data-profile-userid"),t.setCustomLink(n,u,r)})},t.prototype.setCustomLink=function(n,t,r){var u;if(n&&n[t])try{n[t].customLink=i.parseJSON(r)}catch(e){u=e;f.warn("Profile [UsercardRegistration]: Invalid JSON in data-profile-usercard-customLink")}else f.warn("Profile [UsercardRegistration]: Failed to set custom link; user does not exist in data")},t.prototype.showAll=function(n){return i(this.selector).each(function(t){return function(i,r){return t.showWidget(r,n)}}(this))},t.prototype.showWidget=function(n,t){var r,s,u,e,o;if(r=i(n),r.length===0&&f.warn("Profile [UsercardRegistration]: Widget not found in DOM"),o=typeof r.attr("data-profile-rendered")!="undefined",!o)return e=r.attr(this.dataIdName),e?(u=t(this.dataIdName,e),u?(u.Content=r.attr("data-profile-user-point"),u.Rank=r.attr("data-profile-rank"),u.UserId=e,this.inline&&r.html(""),s=i(this.bindTemplate(u)).appendTo(r),r.attr("data-profile-rendered","true")):f.warn("Profile [UsercardRegistration]: Usercard does not exist in data.")):f.warn('Profile [UsercardRegistration]: Expected id in attribute "'+this.dataIdName+'".')},t.prototype.bindTemplate=function(n){var r,t,f;return t=parseFloat(n.PercentileRankings),f=t>=1?0:1,r={settings:u,ellipsify:ot.ellipsify,useDataUri:u.supportsDataUri,PercentileRankingsFormatted:t.toLocaleString(u.lang,{maximumFractionDigits:f})},i.tmpl(this.templateName,n,r)},t.prototype.warn=function(n){return f.warn("Profile [UsercardRegistration]: "+n)},t.prototype.usercardTemplate='<div class="profile-usercard" tabindex="0" aria-label="${$item.ellipsify(DisplayName, 32)} {{if Company}} ${$item.ellipsify(Company, 27)} {{/if}} {{if Affiliations}}} ${Affiliations} {{/if}} ${Points} points ${Achievements.Bronze} bronze medal ${Achievements.Silver} silver medal ${Achievements.Gold} gold medal {{if Achievements.Recent && Achievements.Recent.length > 0}} Recent Achievements {{each Achievements.Recent}} ${Title} {{/each}} {{/if}}"> <div class="profile-header"> <span class="profile-userimage"> {{if $item.useDataUri }} <img src="data:image/jpg;base64,${AvatarData}" alt="'+r.avatar+'"> {{else}} <img src="${Avatar}" alt="'+r.avatar+'"> {{/if}} <\/span> <div> <span title="${DisplayName}" class="profile-display-name" aria-label="${$item.ellipsify(DisplayName, 32)}">${$item.ellipsify(DisplayName, 32)}<\/span> {{if Company}} <span class="profile-company" aria-label="${$item.ellipsify(Company, 27)}">${$item.ellipsify(Company, 27)}<\/span> {{/if}} {{if Affiliations}} <span class="profile-affiliations" aria-label="${Affiliations}">${Affiliations}<\/span> {{/if}} <\/div> <\/div> <div class="profile-points-bar"> <span class="profile-points" aria-label="${Points} points">${Points}<span class="points-label"> '+r.recognitionPoints+'<\/span><\/span> <span class="profile-count profile-bronze-points"><span class="profile-bronze-img" title="'+r.achievementsEarned+'" aria-label="${Achievements.Bronze} bronze medal"><\/span><span>${Achievements.Bronze}<\/span><\/span> <span class="profile-count profile-silver-points"><span class="profile-silver-img" title="'+r.achievementsEarned+'" aria-label="${Achievements.Silver} silver medal"><\/span><span>${Achievements.Silver}<\/span><\/span> <span class="profile-count profile-gold-points"><span class="profile-gold-img" title="'+r.achievementsEarned+'" aria-label="${Achievements.Gold} gold medal"><\/span><span>${Achievements.Gold}<\/span><\/span> <\/div> <div class="profile-achievements-header"> <span class="profile-achievements-title">'+r.recentAchievements+'<\/span> <\/div> <div class="profile-achievements-recent"> <div class="profile-achievements-centering"> {{if Achievements.Recent && Achievements.Recent.length > 0}} {{each Achievements.Recent}} <span class="profile-achievement profile-achievement-${Medal}" aria-label="${Title}"><span>${Title}<\/span><\/span> {{/each}} {{else}} <div class="profile-achievement-none">'+r.learnHowLink()+'<\/div> {{/if}} <\/div> <\/div> <div class="profile-footer"> {{if customLink}} <a href="${customLink.href}" title="${customLink.text}" class="profile-usercard-custom-link" target="_blank">${customLink.text}<\/a>{{/if}} <a href="${Profile}?ws=usercard-hover" class="profile-usercard-profileLink" target="_blank">'+r.viewProfile+"<\/a> <\/div> <\/div>",t}(v);nt=function(n){function t(){t.__super__.constructor.call(this,"data-profile-userid",!1,".profile-usercard-hover",this.usercardTemplate,"usercardTemplate");this.canHide=!1;i(this.selector).live("mouseenter focusin",function(n){return function(t){return n.onMouseEnter(t)}}(this));i(this.selector).live("mouseleave focusout",function(n){return function(t){return n.onMouseLeave(t)}}(this));i(this.selector).live("keydown",function(n){return function(t){return n.onKeyDown(t)}}(this))}return e(t,n),t.prototype.onMouseEnter=function(n){var t,f,r;return r=n.currentTarget,t=i(r),t.data("canHide","no"),f=function(n){return function(){if(t.data("canHide")!=="yes")return t.data("data-profile-rendered")||n.showWidget(r,n.getData),i(".profile-usercard",r).fadeIn(u.animationSpeed),n.canHide=!1,o.LogMetric("Widget.HoverUserCard")}}(this),setTimeout(f,u.showDelay)},t.prototype.onMouseLeave=function(n){var t;return i(n.currentTarget).data("canHide","yes"),this.canHide=!0,t=function(){return function(){if(i(n.currentTarget).data("canHide")==="yes")return i(".profile-usercard",n.currentTarget).fadeOut(u.animationSpeed)}}(this),setTimeout(t,u.hideDelay)},t.prototype.onKeyDown=function(n){var r,t;if(n.keyCode===27)return i(n.currentTarget).data("canHide","yes"),this.canHide=!0,r=function(){return function(){if(i(n.currentTarget).data("canHide")==="yes")return i(".profile-usercard",n.currentTarget).fadeOut(u.animationSpeed)}}(this),setTimeout(r,u.hideDelay);if(n.keyCode===9&&(t=n.currentTarget.querySelectorAll("div[tabindex],a.profile-usercard-profileLink"),t.length)){var f=t[0],e=t[t.length-1],o=n.shiftKey;o?n.target===f&&(e.focus(),n.preventDefault()):n.target===e&&(f.focus(),n.preventDefault())}},t}(c);l=function(n){function t(n,t,r,u,f){this.dataIdName=n;this.inline=t;this.selector=r;this.template=u;this.templateName=f;this.foundIds=[];i.template(this.templateName,this.template);this.baseHeader;this.baseBody;this.compactHeader}return e(t,n),t.prototype.showWidget=function(n,r){return t.__super__.showWidget.call(this,n,r),i(n).find(".textfill")&&i(n).find("div.textsize").textfill(),i(n).find(".profile-userimage-large > img").bind("load",function(n){return a.scaleImage(n.currentTarget,u.largeImageDimension)}).each(function(){if(this.complete)return a.scaleImage(this,u.largeImageDimension)})},t.baseHeader='<div class="baseball-card-header"> <table style="border-collapse: collapse;"> <tr> <td style="padding-left: 0px;"> <div> <a class="baseball-card-userimage crop" href="${Profile}"> <span class="imageHelper"><\/span> <img src="${LargeAvatar}" alt=" '+r.avatar+' " title=" '+r.goToProfile+' "/> <\/a> <\/div> <\/td> <td> <div class="baseball-card-summary"> <div class="baseball-card-point-count"> <div class="textsize" style="width:96px; height:36px; text-align:center"> <span>${Points}<\/span> <\/div> <\/div> {{if Points == 1}} <div class="baseball-card-points-label">'+r.userPoint+'<\/div> {{else}} <div class="baseball-card-points-label">'+r.userPoints+'<\/div> {{/if}} {{if PercentileRankings <= 50.0}} <div class="baseball-card-percentile" style.display="none">'+r.topPercentile+" ${$item.PercentileRankingsFormatted}<\/div> {{/if}} <\/div> <\/td> <\/tr> <\/table> <\/div>",t.compactHeader='<div class="baseball-card-compact-header"> <table style="border-collapse: collapse;"> <tr> <td style="padding-left: 0px;"> <div> <a class="baseball-card-userimage crop baseball-card-compact-userimage" href="${Profile}"> <span class="imageHelper"><\/span> <img src="${LargeAvatar}" alt="'+r.avatar+' " title="'+r.goToProfile+' "/> <\/a> <\/div> <\/td> <td> <div class="baseball-card-summary"> <table style="border-collapse: collapse;"> <tr> <td> <div class="baseball-card-point-count"> <div class="textsize" style="max-width:100px;height:41px; padding-right:5px; padding-left:5px;"> <span>${Points}<\/span> <\/div> <\/div> <\/td> <td style="width:100%; margin:3px; padding-top:5px"> {{if Points == 1}} <div class="baseball-card-points-label">'+r.userPoint+'<\/div> {{else}} <div class="baseball-card-points-label">'+r.userPoints+'<\/div> {{/if}} {{if PercentileRankings <= 50.0}} <div class="baseball-card-percentile" style.display="none">'+r.topPercentile+" ${$item.PercentileRankingsFormatted}<\/div> {{/if}} <\/td> <\/tr> <\/table> <\/div> <\/td> <\/tr> <\/table> <\/div>",t.baseBody='<table class="table" style="width:100%; table-layout: fixed; border-collapse: collapse;"> <tr> <td colspan="2" style="padding-bottom: 0px; padding-left: 0px;"> <a href="${Profile}" title="'+r.goToProfile+'" class="baseball-card-display-name" target="_blank">${DisplayName}<\/a> <\/td> <\/tr> <tr> <td style="padding-top: 0px;"> <span class="baseball-card-affiliate-company" title="${Affiliations}">${Affiliations}<\/span> <\/td> <td> <span class="baseball-card-joined" class="ahenih">'+r.joined+' ${JoinedDate}<\/span> <\/td> <\/tr> <tr> <td colspan="2" style="padding-bottom: 10px;"> <!--<span class="baseball-card-recent-activity">'+r.recentActivity+' <span class="timeago" title="${RecentActivityDate}">${RecentActivityDate}<\/span><\/span>--> <\/td> <\/tr> <tr> <td> <div class="baseball-card-medals"> {{if Achievements.Gold > 0}} {{if Achievements.Gold == 1}} <span class="baseball-card-gold-img" aria-label="${Achievements.Gold} gold medal"> {{else}} <span class="baseball-card-gold-img" aria-label="${Achievements.Gold} gold medals"> {{/if}} <p>${Achievements.Gold}<\/p> <\/span> {{/if}} {{if Achievements.Silver > 0}} {{if Achievements.Silver == 1}} <span class="baseball-card-silver-img" aria-label="${Achievements.Silver} silver medal"> {{else}} <span class="baseball-card-silver-img" aria-label="${Achievements.Silver} silver medals"> {{/if}} <p>${Achievements.Silver}<\/p> <\/span> {{/if}} {{if Achievements.Bronze > 0}} {{if Achievements.Bronze == 1}} <span class="baseball-card-bronze-img" aria-label="${Achievements.Bronze} bronze medal"> {{else}} <span class="baseball-card-bronze-img" aria-label="${Achievements.Bronze} bronze medals"> {{/if}} <p>${Achievements.Bronze}<\/p> <\/span> {{/if}} <\/div> <\/td> <td> <div style="float:right;"> <div style="padding-bottom: 9px;"> {{if customLink}} <a href="${customLink.href}" target="_blank" title="${customLink.text}" class="baseball-card-custom-link">${customLink.text}<\/a> {{/if}} <\/div> <div> <a href="${Profile}activity" target="_blank" class="baseball-card-user-activity"> '+r.showActivity+"<\/a> <\/div> <\/div> <\/td> <\/tr> <\/table>",t}(c);b=function(n){function t(){t.__super__.constructor.call(this,"data-profile-userid",!0,".unified-baseball-card",this.bbCardBaseCardTemplate,"bbCardBaseCardTemplate")}return e(t,n),t.prototype.showWidget=function(n,i){return t.__super__.showWidget.call(this,n,i),o.LogMetric("Widget.BBUnifiedUserCard")},t.prototype.bbCardBaseCardTemplate=t.baseHeader+" "+t.baseBody,t}(l);k=function(n){function t(){t.__super__.constructor.call(this,"data-profile-userid",!0,".unified-baseball-card-compact",this.bbCardBaseCardCompactTemplate,"bbCardBaseCardCompactTemplate")}return e(t,n),t.prototype.showWidget=function(n,i){return t.__super__.showWidget.call(this,n,i),o.LogMetric("Widget.BBCompactUserCard")},t.prototype.bbCardBaseCardCompactTemplate=t.compactHeader+" "+t.baseBody,t}(l);d=function(n){function t(){t.__super__.constructor.call(this,"data-profile-userid",!1,".unified-baseball-card-compact-hover",this.bbCardBaseCardCompactHoverTemplate,"bbCardBaseCardCompactHoverTemplate");this.canHide=!1;i(this.selector).live("mouseenter",function(n){return function(t){return n.onMouseEnter(t)}}(this));i(this.selector).live("mouseleave",function(n){return function(t){return n.onMouseLeave(t)}}(this))}return e(t,n),t.prototype.onMouseEnter=function(n){var t,f,r;return r=n.currentTarget,t=i(r),t.data("canHide","no"),f=function(n){return function(){if(t.data("canHide")!=="yes")return t.data("data-profile-rendered")||n.showWidget(r,n.getData),i(".unified-baseball-card-compact-whole",r).fadeIn(u.animationSpeed),i("div.textsize").textfill(),n.canHide=!1,o.LogMetric("Widget.BBHoverUserCard")}}(this),setTimeout(f,u.showDelay)},t.prototype.onMouseLeave=function(n){var t;return i(n.currentTarget).data("canHide","yes"),this.canHide=!0,t=function(){return function(){if(i(n.currentTarget).data("canHide")==="yes")return i(".unified-baseball-card-compact-whole",n.currentTarget).fadeOut(u.animationSpeed)}}(this),setTimeout(t,u.hideDelay)},t.prototype.showWidget=function(n,i){return t.__super__.showWidget.call(this,n,i)},t.prototype.bbCardBaseCardCompactHoverTemplate='<div class="unified-baseball-card-compact-whole">'+t.compactHeader+" "+t.baseBody+"<\/div>",t}(l);g=function(n){function t(){t.__super__.constructor.call(this,"data-profile-userid",!1,".unified-baseball-card-mini",this.bbCardMiniTemplate,"bbCardMiniTemplate")}return e(t,n),t.prototype.showWidget=function(n,r){var u,f;if(!i(".profile-mini",n).length)return u=i(n),f=u.html(),u.html(""),t.__super__.showWidget.call(this,n,r),u.find(".profile-mini-content").html(f)},t.prototype.bbCardMiniTemplate='<div class="profile-mini"> <div class="profile-mini-header"> <div class="profile-mini-userimage"> {{if $item.useDataUri }} <img src="data:image/jpg;base64,${AvatarData}" alt="'+r.avatar+'"> {{else}} <img src="${Avatar}" alt="'+r.avatar+'"> {{/if}} <\/div> <div class="profile-mini-container"> <div class="profile-mini-display-name"><div class="unified-baseball-card-compact-hover" data-profile-userid="${UserId}"><a href="${Profile}?ws=usercard-mini" class="profile-mini-display-name-link" target="_blank">${DisplayName}<\/a><\/div><\/div> {{if Company}} <div class="profile-mini-company">${$item.ellipsify(Company, 27)}<\/div> {{/if}} <div class="profile-mini-affiliations"> {{if Affiliations}} (${Affiliations}) {{/if}} <\/div> <span class="profile-mini-points">${Points}<span class="points-label"> '+r.recognitionPoints+'<\/span><\/span> <\/div> <div class="profile-mini-content"> <\/div> <\/div> <\/div>',t}(l);tt=function(n){function t(){t.__super__.constructor.call(this,"data-profile-userid",!0,".profile-usercard-inline",this.inlineTemplate,"inlineTemplate")}return e(t,n),t.prototype.showWidget=function(n,r){return t.__super__.showWidget.call(this,n,r),i(n).find(".profile-userimage-large > img").bind("load",function(n){return a.scaleImage(n.currentTarget,u.largeImageDimension)}).each(function(){if(this.complete)return a.scaleImage(this,u.largeImageDimension)}),o.LogMetric("Widget.InlineUserCard")},t.prototype.inlineTemplate='<div class="profile-usercard profile-inline"> <div class="profile-inline-header"> <span class="profile-userimage-large"> <img src="${LargeAvatar}" alt="'+r.avatar+'" /> <\/span> <div class="profile-inline-header-details"> <div title="${DisplayName}" class="profile-inline-display-name">${$item.ellipsify(DisplayName, 32)}<\/div> {{if Company}} <div class="profile-company profile-inline-secondary">${$item.ellipsify(Company, 27)}<\/div> {{/if}} {{if Affiliations}} <div class="profile-affiliations profile-inline-secondary">${Affiliations}<\/div> {{/if}} {{if Website}} <div class="profile-inline-url profile-inline-secondary"> <a title="${Website}" href="${Website}" target="_blank">${$item.ellipsify(Website.replace("http://", "").replace("https://", ""), 22)}<\/a><\/div> {{/if}} <\/div> <\/div> <div class="profile-statline"> <span class="profile-points">${Points}<span class="points-label"> '+r.recognitionPoints+'<\/span><\/span> <span class="profile-count profile-bronze-points"><span class="profile-bronze-img" title="'+r.achievementsEarned+'"><\/span><span>${Achievements.Bronze}<\/span><\/span> <span class="profile-count profile-silver-points"><span class="profile-silver-img" title="'+r.achievementsEarned+'"><\/span><span>${Achievements.Silver}<\/span><\/span> <span class="profile-count profile-gold-points"><span class="profile-gold-img" title="'+r.achievementsEarned+'"><\/span><span>${Achievements.Gold}<\/span><\/span> <\/div> <div class="profile-biography">{{if Biography}}${Biography}{{/if}}<\/div> <div class="profile-footer"> {{if customLink}} <a href="${customLink.href}" title="${customLink.text}" target="_blank" class="profile-usercard-custom-link">${customLink.text}<\/a> {{/if}} <a href="${Profile}?ws=usercard-inline" class="profile-usercard-profileLink" target="_blank">'+r.viewProfile+"<\/a> <\/div> <\/div>",t}(c);rt=function(n){function t(){t.__super__.constructor.call(this,"data-profile-userid",!1,".profile-leaderboard-item",this.leaderboardTemplate,"leaderboardTemplate")}return e(t,n),t.prototype.showWidget=function(n,r){var f;return t.__super__.showWidget.call(this,n,r),f=i(n),f.find("div").length>0&&f.show(),f.find(".profile-leaderboard-value").format({format:"+#,###",locale:u.lang}),f.show()},t.prototype.leaderboardTemplate='<div class="profile-leaderboard-container"> <div class="profile-leaderboard-rank">${Rank}<\/div> <div class="profile-leaderboard-userimage"> {{if $item.useDataUri }} <img src="data:image/jpg;base64,${AvatarData}" alt="'+r.avatar+'"> {{else}} <img src="${Avatar}" alt="'+r.avatar+'"> {{/if}} <\/div> <div class="profile-leaderboard-name profile-usercard-hover" data-profile-userid="${UserId}"> <a href="${Profile}?ws=leaderboard" target="_blank" data-profile-userid="${UserId}">${DisplayName}<\/a> <\/div> <div class="profile-ie7-envelope"><div class="profile-leaderboard-value">+${Content}<\/div><\/div> <\/div>',t}(c);ut=function(n){function t(){t.__super__.constructor.call(this,"data-profile-userid",!1,".profile-usercard-mini",this.miniTemplate,"miniTemplate")}return e(t,n),t.prototype.showWidget=function(n,r){var u,f;if(!i(".profile-mini",n).length)return u=i(n),f=u.html(),u.html(""),t.__super__.showWidget.call(this,n,r),u.find(".profile-mini-content").html(f)},t.prototype.miniTemplate='<div class="profile-mini"> <div class="profile-mini-header"> <div class="profile-mini-userimage"> {{if $item.useDataUri }} <img src="data:image/jpg;base64,${AvatarData}" alt="'+r.avatar+'"> {{else}} <img src="${Avatar}" alt="'+r.avatar+'"> {{/if}} <\/div> <div class="profile-mini-container"> <div title="${DisplayName}" class="profile-mini-display-name"><div class="profile-usercard-hover" data-profile-userid="${UserId}"><a href="${Profile}?ws=usercard-mini" target="_blank">${DisplayName}<\/a><\/div><\/div> {{if Company}} <div class="profile-mini-company">${$item.ellipsify(Company, 27)}<\/div> {{/if}} <div class="profile-mini-affiliations"> {{if Affiliations}} (${Affiliations}) {{/if}} <\/div> <span class="profile-mini-points">${Points}<span class="points-label"> '+r.recognitionPoints+'<\/span><\/span> <\/div> <div class="profile-mini-content"> <\/div> <\/div> <\/div>',t}(c);it=function(n){function t(){this.dataIdName="data-profile-leaderboard-key";this.selector=".profile-leaderboard";this.foundIds=[];this.headerName="leaderboardHeaderTemplate";this.itemName="leaderboardItemTemplate";this.emptyName="leaderboardEmptyTemplate";i.template(this.headerName,this.leaderboardHeaderTemplate);i.template(this.itemName,this.leaderboardItemTemplate);i.template(this.emptyName,this.leaderboardEmptyTemplate)}return e(t,n),t.prototype.showAll=function(n){return i(this.selector).each(function(t){return function(i,r){return t.showWidget(r,n)}}(this))},t.prototype.showWidget=function(n,t){var f,s,o,h,v,e,c,u,y,l,a;if(f=i(n),f.attr("data-profile-leaderboard-loaded")){f.profileWidgitize();return}if(f.attr("data-profile-leaderboard-loaded",!0),c=f.attr("data-profile-leaderboard-key"),c){if(o=t(this.dataIdName,c),o!=null&&(u=i.parseJSON(o.Items),(u!=null?u.length:void 0)>0)){for(v=this.localizeHeader(o.Header),i.tmpl(this.headerName,v).appendTo(n),a=1,l=u[0].RankingColumn,e=0,y=u.length;e<y;e++)h=u[e],s=h.RankingColumn,s!==l&&(a=e+1),l=s,h.Rank=a;i.tmpl(this.itemName,u).appendTo(n);f.profileWidgitize();return}return i.tmpl(this.emptyName,r.leaderboardEmpty).appendTo(n)}return this.warn('Expected key in attribute "'+this.dataIdName+'"')},t.prototype.localizeHeader=function(n){var o,t,i,u,f,e;try{t=n.match(/points earned|activities completed/)[0];u=n.match(/weeks|week|days|day|hours|hour|all time/)[0];i=(f=n.match(/\d+/))!=null?f[0]:void 0;e=r.header[t]+" - "+r.header[u].replace(/%d/,i)}catch(s){o=s;leaderboard.warn("failed to load leaderboard header")}return e},t.prototype.onDataLoaded=function(){},t.prototype.leaderboardEmptyTemplate='<div class="profile-leaderboard-empty">${}<\/div>',t.prototype.leaderboardHeaderTemplate='<div class="profile-leaderboard-header">${}<\/div>',t.prototype.leaderboardItemTemplate='<div class="profile-leaderboard-item" data-profile-userid="${UserId}" data-profile-rank="${Rank}" data-profile-user-point="${RankingColumn}" style="display: none;"><\/div>',t.prototype.warn=function(n){return f.warn("Profile [Leaderboard]: "+n)},t}(v);et=function(n){function t(){this.dataIdName="data-profile-statGroupId";this.selector=".profile-statGroup";this.foundIds=[];this.statGroupTemplateName="statGroupTemplate";i.template(this.statGroupTemplateName,this.statGroupTemplate)}return e(t,n),t.prototype.canonicalizeId=function(n){return n.replace(/[^a-zA-Z0-9_\-;]/g,"")},t.prototype.findIds=function(n){var r,u,f,e,t,o,c,l,h,s;for(u=[],h=i(this.selector,n),f=0,c=h.length;f<c;f++)t=h[f],o=l=void 0,o=i(t).attr("data-profile-statGroup-key"),r=i(t).attr("data-profile-filterLocale"),r==null&&(r=""),s=i(t).attr("data-profile-userId"),s==null&&(s=""),o!=null?(e=this.canonicalizeId(o+";"+r+";"+s),i(t).attr(this.dataIdName,e),i.inArray(e,u)===-1&&u.push(e)):this.warn('Missing required attribute(s) "data-profile-statGroup-key"');return u},t.prototype.showAll=function(n){return i(this.selector).each(function(t){return function(i,r){return t.showWidget(r,n)}}(this))},t.prototype.showWidget=function(n,t){var r,e,o,s;if(r=i(n),r.length===0&&f.warn("Profile [StatGroupWidgetRegistration]: Widget not found in DOM"),s=typeof r.attr("data-profile-rendered")!="undefined",!s)return o=r.attr(this.dataIdName),o!=null?(e=t(this.dataIdName,o),e?(i.tmpl(this.statGroupTemplate,e).appendTo(r),r.attr("data-profile-rendered","true"),r.find(".value").format({format:"#,###",locale:u.lang})):f.warn("Profile [StatGroupWidgetRegistration]: Item does not exist in data.")):f.warn('Profile [StatGroupWidgetRegistration]: Expected id in attribute "'+this.dataIdName+'".')},t.prototype.onDataLoaded=function(){},t.prototype.statGroupTemplate='<div class="statistic-group"> <div class="statistic-header">${Header}<\/div> <table class="statistic-table"> <tbody> {{each Statistics}} <tr> <td class="name">${$value.Name}<\/td> <td class="value"><span>${$value.Value}<\/span><\/td> <\/tr> {{/each}} <\/tbody> <\/table> <\/div>',t}(v);y=function(){function n(n,r,u,f){var e,s,o,h;for(this.registeredWidgets=n,this.createDataUri=r,this.jsonpCallbackName=u,this.batch=f!=null?f:!1,this.getData=w(this.getData,this),this.loadDataError=w(this.loadDataError,this),this.loadDataSuccess=w(this.loadDataSuccess,this),this.scannedIds=[],i(t).ajaxComplete(function(n){return function(){return n.scanWhenAble()}}(this)),o=this.registeredWidgets,e=0,s=o.length;e<s;e++)h=o[e],h.getData=function(n){return function(t,i){return n.getData(t,i)}}(this)}return n.prototype.scan=function(n){var t,f,r,e,o,c,l,a,u,s,v,h;for(t=[],s=this.registeredWidgets,f=0,c=s.length;f<c;f++)for(v=s[f],h=v.findIds(n),e=0,l=h.length;e<l;e++)r=h[e],i.inArray(r,t)===-1&&t.push(r);if(u=[],this.scannedIds)for(o=0,a=t.length;o<a;o++)r=t[o],i.inArray(r,this.scannedIds)===-1&&(u.push(r),this.scannedIds.push(r));else u=t,this.scannedIds=t;return u.length?this.loadData(u):this.showItems()},n.prototype.scanWhenAble=function(){var n;return this.pending||(n=function(n){return function(){return n.scan(),n.pending=!1}}(this),setTimeout(n,u.scanDelay)),this.pending=!0},n.prototype.showItems=function(){var n,r,t,i,u;for(t=this.registeredWidgets,i=[],n=0,r=t.length;n<r;n++)u=t[n],i.push(u.showAll(this.getData));return i},n.prototype.loadData=function(n){var t;return this.batch?(t=u.userDataBatchSize,this.currentBatch=this.currentBatch>=0?this.currentBatch+1:0,n.length<=t?this.loadDataAjax(n,this.currentBatch):(this.batch=n.slice(0,t),this.loadDataAjax(this.batch,this.currentBatch),n=n.slice(t,n.length),this.loadData(n))):this.loadDataAjax(n)},n.prototype.loadDataAjax=function(n,t){return i.ajax({url:this.createDataUri(n),dataType:"jsonp",cache:!0,jsonpCallback:this.jsonpCallbackName+(t!=null?t:""),success:this.loadDataSuccess,error:this.loadDataError})},n.prototype.loadDataSuccess=function(n){var t,u,r,f;for(this.data=i.extend(!0,this.data,n),r=this.registeredWidgets,t=0,u=r.length;t<u;t++){f=r[t];f.onDataLoaded(this.data)}return this.showItems()},n.prototype.loadDataError=function(n){return this.warn("Ajax request error: #status, "+n.status+": "+n.statusText)},n.prototype.getData=function(n,t){var i,r;return this.data||this.warn("Unable to load data"),i=(r=this.data)!=null?r[t]:void 0,i&&(i[n]=t),i},n.prototype.warn=function(n){return f.warn("Profile [Scanner]: "+n)},n}();ft=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return e(t,n),t.prototype.loadData=function(n){var t,r,u,i;for(i=[],t=0,u=n.length;t<u;t++)r=n[t],i.push(this.loadDataAjax(r));return i},t.prototype.loadDataAjax=function(n){var t;return t=n.split(";"),i.ajax({url:this.createDataUri(t[0],t[1],t[2]),dataType:"jsonp",cache:!0,jsonpCallback:this.jsonpCallbackName,success:this.loadDataSuccess,error:this.loadDataError})},t}(y);st=function(){function n(){var n,t,r,u,f;this.detectFeatures();r=[new tt,new rt,new ut,new nt,new g,new b,new k,new d];this.usercardScanner=new y(r,s.createUsercardDataUri,"jsonp_loadUserData",!0);t=[new it];this.leaderboardScanner=new y(t,s.createLeaderboardDataUri,"jsonp_loadLeaderboardData",!1);u=[new et];this.statGroupScanner=new ft(u,s.createStatGroupDataUri,"jsonp_loadStatGroupData",!1);f=this.usercardScanner;i.fn.profileWidgitize=function(){return f.scanWhenAble(this),this};this.usercardScanner.scan();this.leaderboardScanner.scan();this.statGroupScanner.scan();n=new Image;n.src=s.createWidgetImageUri();this.aiSetup()}return n.prototype.detectFeatures=function(){var n;return n=new Image,n.onload=n.onabort=n.onerror=function(){return u.supportsDataUri=this.width===1&&this.height===1},n.src="data:image/gif;base64,R0lGODlhAQABAIABAP8AAP///yH5BAEAAAEALAAAAAABAAEAAAICRAEAOw%3D%3D"},n.prototype.aiSetup=function(){return i(".baseball-card-userimage, .baseball-card-compact-userimage").live("click",function(){return function(){return o.LogMetric("Widget.DisplayImage.Click")}}(this)),i(".baseball-card-display-name").live("click",function(){return function(){return o.LogMetric("Widget.DisplayName.Click")}}(this)),i(".profile-mini-display-name-link").live("click",function(){return function(){return o.LogMetric("Widget.Mini.DisplayName.Click")}}(this)),i(".baseball-card-custom-link").live("click",function(){return function(){return o.LogMetric("Widget.CustomLink.Click")}}(this)),i(".baseball-card-user-activity").live("click",function(){return function(){return o.LogMetric("Widget.UserActivity.Click")}}(this))},n}();i(t).ready(function(){return new st})})(this,document,jQuery)}).call(this)